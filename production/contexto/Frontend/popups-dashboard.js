/**\n * Sistema de Popups Unificado - Ejemplos de Uso\n * Archivo de referencia para usar los popups personalizados en el dashboard\n */\n\n// ===============================================\n// EJEMPLOS DE USO PARA EL DASHBOARD\n// ===============================================\n\n/**\n * Ejemplo: Bot\u00f3n \"Eliminar cuenta\" en perfil.html\n */\nfunction configurarBotonEliminarCuenta() {\n  const btnEliminarCuenta = document.getElementById('delete-account-btn');\n  \n  if (btnEliminarCuenta) {\n    btnEliminarCuenta.addEventListener('click', function(e) {\n      e.preventDefault();\n      \n      // Usar el popup personalizado\n      mostrarPopupEliminarCuenta(() => {\n        // L\u00f3gica para eliminar la cuenta\n        console.log('\ud83d\uddd1\ufe0f Eliminando cuenta...');\n        \n        // Simular proceso de eliminaci\u00f3n\n        setTimeout(() => {\n          mostrarPopupExito(\n            \"Cuenta Eliminada\",\n            \"Tu cuenta ha sido eliminada exitosamente. Ser\u00e1s redirigido al inicio.\",\n            () => {\n              window.location.href = '/index.html';\n            }\n          );\n        }, 2000);\n      });\n    });\n  }\n}\n\n/**\n * Ejemplo: Bot\u00f3n \"Cambiar contrase\u00f1a\" en perfil.html\n */\nfunction configurarBotonCambiarContrasena() {\n  const btnCambiarContrasena = document.getElementById('change-password-btn');\n  \n  if (btnCambiarContrasena) {\n    btnCambiarContrasena.addEventListener('click', function(e) {\n      e.preventDefault();\n      \n      mostrarPopupCambiarContrasena(() => {\n        // L\u00f3gica para enviar email de cambio de contrase\u00f1a\n        console.log('\ud83d\udce7 Enviando email de cambio de contrase\u00f1a...');\n        \n        // Simular env\u00edo de email\n        setTimeout(() => {\n          mostrarPopupExito(\n            \"Email Enviado\",\n            \"Te hemos enviado un email con las instrucciones para cambiar tu contrase\u00f1a.\"\n          );\n        }, 1500);\n      });\n    });\n  }\n}\n\n/**\n * Ejemplo: Bot\u00f3n \"Guardar configuraciones\" en perfil.html\n */\nfunction configurarBotonGuardarConfiguraciones() {\n  const btnGuardarSettings = document.getElementById('save-settings-btn');\n  \n  if (btnGuardarSettings) {\n    btnGuardarSettings.addEventListener('click', function(e) {\n      e.preventDefault();\n      \n      mostrarPopupGuardarConfiguraciones(() => {\n        // L\u00f3gica para guardar configuraciones\n        console.log('\ud83d\udcbe Guardando configuraciones...');\n        \n        // Simular guardado\n        const btnText = this.querySelector('.btn-text');\n        const btnLoading = this.querySelector('.btn-loading');\n        \n        if (btnText && btnLoading) {\n          btnText.style.display = 'none';\n          btnLoading.style.display = 'inline-flex';\n        }\n        \n        setTimeout(() => {\n          if (btnText && btnLoading) {\n            btnText.style.display = 'inline-flex';\n            btnLoading.style.display = 'none';\n          }\n          \n          mostrarPopupExito(\n            \"Configuraciones Guardadas\",\n            \"Todas tus configuraciones han sido guardadas exitosamente.\"\n          );\n        }, 2000);\n      });\n    });\n  }\n}\n\n/**\n * Ejemplo: Bot\u00f3n \"Cerrar sesi\u00f3n\" en el dropdown del usuario\n */\nfunction configurarBotonCerrarSesion() {\n  const btnLogout = document.getElementById('logout-btn');\n  \n  if (btnLogout) {\n    btnLogout.addEventListener('click', function(e) {\n      e.preventDefault();\n      \n      mostrarPopupCerrarSesion(() => {\n        // L\u00f3gica para cerrar sesi\u00f3n\n        console.log('\ud83d\ude45 Cerrando sesi\u00f3n...');\n        \n        // Simular cierre de sesi\u00f3n\n        setTimeout(() => {\n          // Limpiar localStorage/sessionStorage si es necesario\n          sessionStorage.clear();\n          localStorage.removeItem('userData');\n          \n          // Redirigir al login\n          window.location.href = '/private/auth/login.html';\n        }, 1000);\n      });\n    });\n  }\n}\n\n/**\n * Ejemplo: Eliminar direcci\u00f3n con confirmaci\u00f3n\n */\nfunction configurarEliminarDireccion() {\n  // Event delegation para botones de eliminar direcci\u00f3n que se crean din\u00e1micamente\n  document.addEventListener('click', function(e) {\n    if (e.target.matches('.btn-delete-address') || e.target.closest('.btn-delete-address')) {\n      e.preventDefault();\n      \n      const btn = e.target.closest('.btn-delete-address') || e.target;\n      const alias = btn.dataset.alias || 'esta direcci\u00f3n';\n      const addressId = btn.dataset.addressId;\n      \n      mostrarPopupEliminarDireccion(alias, () => {\n        // L\u00f3gica para eliminar direcci\u00f3n\n        console.log(`\ud83d\uddd1\ufe0f Eliminando direcci\u00f3n: ${alias}`);\n        \n        // Simular eliminaci\u00f3n\n        const addressElement = btn.closest('.address-item');\n        if (addressElement) {\n          addressElement.style.transition = 'all 0.3s ease';\n          addressElement.style.opacity = '0';\n          addressElement.style.transform = 'translateX(-20px)';\n          \n          setTimeout(() => {\n            addressElement.remove();\n            \n            mostrarPopupExito(\n              \"Direcci\u00f3n Eliminada\",\n              `La direcci\u00f3n \"${alias}\" ha sido eliminada exitosamente.`\n            );\n          }, 300);\n        }\n      });\n    }\n  });\n}\n\n/**\n * Ejemplo: Manejo de errores con popup\n */\nfunction manejarErrores() {\n  // Capturar errores de la aplicaci\u00f3n\n  window.addEventListener('error', function(e) {\n    console.error('Error capturado:', e.error);\n    \n    // Mostrar popup de error solo para errores cr\u00edticos\n    if (e.error && e.error.message && e.error.message.includes('CRITICAL')) {\n      mostrarPopupError(\n        \"Error de Aplicaci\u00f3n\",\n        \"Ha ocurrido un error inesperado. Por favor, recarga la p\u00e1gina o contacta al soporte.\"\n      );\n    }\n  });\n  \n  // Capturar errores de fetch (APIs)\n  const originalFetch = window.fetch;\n  window.fetch = function(...args) {\n    return originalFetch.apply(this, args)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n        }\n        return response;\n      })\n      .catch(error => {\n        console.error('Error de API:', error);\n        \n        // Mostrar popup de error para fallos de API\n        mostrarPopupError(\n          \"Error de Conexi\u00f3n\",\n          \"No se pudo conectar con el servidor. Verifica tu conexi\u00f3n a internet e int\u00e9ntalo nuevamente.\"\n        );\n        \n        throw error;\n      });\n  };\n}\n\n/**\n * Ejemplo: Integraci\u00f3n con formularios\n */\nfunction configurarFormularios() {\n  // Interceptar env\u00edo de formularios importantes\n  const formsConConfirmacion = document.querySelectorAll('.form-with-confirmation');\n  \n  formsConConfirmacion.forEach(form => {\n    form.addEventListener('submit', function(e) {\n      e.preventDefault();\n      \n      const formData = new FormData(this);\n      const accion = this.dataset.action || 'guardar cambios';\n      \n      mostrarPopupConfirmacion({\n        title: \"Confirmar Acci\u00f3n\",\n        message: `\u00bfEst\u00e1s seguro de que deseas ${accion}?`,\n        icon: \"fas fa-save\",\n        confirmText: \"Confirmar\",\n        cancelText: \"Cancelar\",\n        tipo: \"info\",\n        onConfirm: () => {\n          // Enviar formulario\n          console.log('\ud83d\udcdd Enviando formulario...');\n          \n          // Aqu\u00ed ir\u00eda la l\u00f3gica real de env\u00edo\n          // fetch('/api/submit', { method: 'POST', body: formData })\n          \n          // Simular env\u00edo\n          setTimeout(() => {\n            mostrarPopupExito(\n              \"Formulario Enviado\",\n              \"Los datos han sido guardados exitosamente.\"\n            );\n          }, 1500);\n        }\n      });\n    });\n  });\n}\n\n// ===============================================\n// INICIALIZACI\u00d3N\n// ===============================================\n\n/**\n * Inicializa todos los popups del dashboard\n */\nfunction inicializarPopupsDashboard() {\n  console.log('\ud83c\udf86 Inicializando sistema de popups del dashboard...');\n  \n  // Configurar todos los tipos de popups\n  configurarBotonEliminarCuenta();\n  configurarBotonCambiarContrasena();\n  configurarBotonGuardarConfiguraciones();\n  configurarBotonCerrarSesion();\n  configurarEliminarDireccion();\n  configurarFormularios();\n  manejarErrores();\n  \n  console.log('\u2705 Sistema de popups del dashboard inicializado');\n}\n\n// Inicializar cuando el DOM est\u00e9 listo\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', inicializarPopupsDashboard);\n} else {\n  inicializarPopupsDashboard();\n}\n\n// Hacer disponible globalmente para usar desde consola o otros scripts\nwindow.PopupsDashboard = {\n  configurarBotonEliminarCuenta,\n  configurarBotonCambiarContrasena,\n  configurarBotonGuardarConfiguraciones,\n  configurarBotonCerrarSesion,\n  configurarEliminarDireccion,\n  configurarFormularios,\n  inicializarPopupsDashboard\n};\n\nconsole.log('\ud83d\udce6 M\u00f3dulo PopupsDashboard cargado');\n